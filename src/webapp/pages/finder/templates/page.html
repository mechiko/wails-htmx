<!-- Здесь выводятся компоненты по роутингу если нет глобальной ошибки model.Finder -->
{{if (len $.Errors)}}
<div id="modal" class="flex flex-col items-center" 
  _="on closeModal add .closing then wait for animationend then remove me">
	<div class="modal-underlay" _="on click trigger closeModal"></div>
	<div class="modal-content w-2/3 mt-20 min-h-60">
        Ошибки:
        {{ range $j, $row := $.Errors }}
        <div class="text-red-300">{{$row}}</div>
        {{ end }}
  </div>
</div>
{{end}}

<div class="m-2">
  <span class="text-primary">Коды CIS для поиска:</span>
  <form hx-encoding='multipart/form-data' hx-post='/finder/upload' hx-target="#page" hx-swap="innerHTML">
    <input type='file' name='file' _="on change toggle @disabled on #sbmt">
    <input id="sbmt" type="submit" disabled value="Загрузить" class="btn btn-outline btn-primary"/>  
  </form>
</div>
{{if $.CisFindInfoIn}}
<div class="m-2">
  <table class="w-1/2 ml-1 border border-collapse">
    <caption>Загружены коды</caption>
    <col style="width:20%">
    <col style="width:10%">
    <col style="width:10%">
    <col style="width:10%">
    <col style="width:10%">
    <tbody>
    {{range $ci, $cis := $.CisFindInfoIn }}
    <tr class="text-base">
      <td class="pl-1 border">{{$cis.Root}}</td>
      <td class="text-base pl-1 border">{{$cis.Dir}}</td>
      <td class="text-base pl-1 border">{{$cis.Name}}</td>
      <td class="text-base pl-1 border">{{$cis.Cis}}</td>
      <td class="text-base pl-1 border">{{$cis.Code}}</td>
    </tr>
    {{end}}

    </tbody>
  </table>
</div>
{{end}}
<div class="m-2">
  <span class="text-primary">Введите код для поиска:</span>
  <form hx-post='/finder/find' hx-target="#finded" hx-swap="innerHTML">
    <input value="{{$.FormInput}}" class="input input-bordered w-full max-w-xs" type="text" placeholder="введите КМ" name='cisfield' _="on change toggle @disabled on #sbmt"/>
    <input id="sbmt" type="submit" disabled value="Найти" class="btn btn-outline btn-primary"/>  
  </form>
  <div id="finded"></div>
</div>
