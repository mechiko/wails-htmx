<!-- Здесь выводятся компоненты по роутингу если нет глобальной ошибки model.Finder -->
{{if (len $.Errors)}}
<div id="modal" class="flex flex-col items-center" 
  _="on closeModal add .closing then wait for animationend then remove me">
	<div class="modal-underlay" _="on click trigger closeModal"></div>
	<div class="modal-content w-2/3 mt-20 min-h-60">
        Ошибки:
        {{ range $j, $row := $.Errors }}
        <div class="text-red-300">{{$row}}</div>
        {{ end }}
  </div>
</div>
{{end}}

<div class="m-2">
  <span class="text-primary">Коды CIS для поиска:</span>
  <form hx-encoding='multipart/form-data' hx-post='/finder/upload' hx-target="#page" hx-swap="innerHTML">
    <input type='file' name='file' _="on change toggle @disabled on #sbmt">
    <input id="sbmt" type="submit" disabled value="Загрузить" class="btn btn-outline btn-primary"/>  
  </form>
</div>
{{if $.CisFindInfoIn}}
<div class="m-2">
  <table class="w-1/2 ml-1 border border-collapse">
    <caption class="m-1 pb-2 font-bold "><a href="#" hx-get="/finder/datamatrix" hx-trigger="click" hx-target="this" hx-swap="none">Загружены коды</a></caption>
    <col style="width:20%">
    <col style="width:10%">
    <col style="width:10%">
    <col style="width:10%">
    <col style="width:10%">
    <col style="width:10%">
    <thead>
      <tr>
        <th class="pl-1 border">УР1</th>
        <th class="pl-1 border">УР2</th>
        <th class="pl-1 border">Название</th>
        <th class="pl-1 border">Ищем</th>
        <th class="pl-1 border">Нашли</th>
        <th class="pl-1 border">Заказ</th>
      </tr>
    </thead>
    <tbody>
    {{range $ci, $cis := $.CisFindInfoIn }}
    <tr class="text-base">
      <td class="pl-1 border">{{$cis.Root}}</td>
      <td class="p-1 text-base pl-1 border">{{$cis.Dir}}</td>
      <td class="p-1 text-base pl-1 border">{{$cis.Name}}</td>
      <td class="p-1 text-base pl-1 border">{{$cis.Cis}}</td>
      <td class="p-1 text-base pl-1 border">{{$cis.Code}}</td>
      <td class="p-1 text-base pl-1 border">{{$cis.Order}}</td>
      <td class="p-1 text-base pl-1 border">
        <div _="on load put DATAMatrix({ msg:'{{$cis.CodeFNS}}',dim:100,rct:0,pad:2,pal:['#000000','#f2f4f8'],vrb:0}) into me"></svg>
        <!-- <svg viewBox="0 0 24 24" width="256" height="256" fill="#000" shape-rendering="crispEdges" xmlns="http://www.w3.org/2000/svg" version="1.1"><path transform="matrix(1,0,0,1,2,2)" d="M0,19h20v1h-20v-1zM18,18h1v1h-1v-1zM10,18h4v1h-4v-1zM8,18h1v1h-1v-1zM4,18h1v1h-1v-1zM2,18h1v1h-1v-1zM0,18h1v1h-1v-1zM19,17h1v1h-1v-1zM17,17h1v1h-1v-1zM12,17h2v1h-2v-1zM8,17h1v1h-1v-1zM0,17h3v1h-3v-1zM17,16h2v1h-2v-1zM14,16h1v1h-1v-1zM8,16h3v1h-3v-1zM4,16h2v1h-2v-1zM0,16h2v1h-2v-1zM19,15h1v1h-1v-1zM16,15h1v1h-1v-1zM11,15h1v1h-1v-1zM8,15h1v1h-1v-1zM3,15h3v1h-3v-1zM0,15h2v1h-2v-1zM18,14h1v1h-1v-1zM14,14h1v1h-1v-1zM10,14h1v1h-1v-1zM7,14h1v1h-1v-1zM0,14h5v1h-5v-1zM18,13h2v1h-2v-1zM13,13h4v1h-4v-1zM11,13h1v1h-1v-1zM9,13h1v1h-1v-1zM6,13h1v1h-1v-1zM3,13h2v1h-2v-1zM0,13h1v1h-1v-1zM14,12h2v1h-2v-1zM11,12h2v1h-2v-1zM9,12h1v1h-1v-1zM6,12h2v1h-2v-1zM2,12h2v1h-2v-1zM0,12h1v1h-1v-1zM17,11h3v1h-3v-1zM13,11h2v1h-2v-1zM7,11h5v1h-5v-1zM0,11h4v1h-4v-1zM17,10h2v1h-2v-1zM14,10h1v1h-1v-1zM11,10h1v1h-1v-1zM7,10h2v1h-2v-1zM4,10h1v1h-1v-1zM2,10h1v1h-1v-1zM0,10h1v1h-1v-1zM19,9h1v1h-1v-1zM16,9h2v1h-2v-1zM13,9h2v1h-2v-1zM11,9h1v1h-1v-1zM6,9h4v1h-4v-1zM3,9h1v1h-1v-1zM0,9h2v1h-2v-1zM7,8h8v1h-8v-1zM0,8h5v1h-5v-1zM17,7h3v1h-3v-1zM14,7h1v1h-1v-1zM11,7h1v1h-1v-1zM9,7h1v1h-1v-1zM6,7h1v1h-1v-1zM3,7h1v1h-1v-1zM0,7h1v1h-1v-1zM18,6h1v1h-1v-1zM13,6h4v1h-4v-1zM9,6h1v1h-1v-1zM2,6h1v1h-1v-1zM0,6h1v1h-1v-1zM19,5h1v1h-1v-1zM17,5h1v1h-1v-1zM14,5h2v1h-2v-1zM12,5h1v1h-1v-1zM8,5h1v1h-1v-1zM5,5h1v1h-1v-1zM0,5h2v1h-2v-1zM14,4h5v1h-5v-1zM11,4h2v1h-2v-1zM2,4h1v1h-1v-1zM0,4h1v1h-1v-1zM18,3h2v1h-2v-1zM15,3h1v1h-1v-1zM12,3h1v1h-1v-1zM10,3h1v1h-1v-1zM7,3h1v1h-1v-1zM5,3h1v1h-1v-1zM0,3h3v1h-3v-1zM13,2h4v1h-4v-1zM9,2h2v1h-2v-1zM7,2h1v1h-1v-1zM4,2h1v1h-1v-1zM0,2h1v1h-1v-1zM19,1h1v1h-1v-1zM15,1h3v1h-3v-1zM11,1h2v1h-2v-1zM4,1h2v1h-2v-1zM0,1h2v1h-2v-1zM18,0h1v1h-1v-1zM16,0h1v1h-1v-1zM14,0h1v1h-1v-1zM12,0h1v1h-1v-1zM10,0h1v1h-1v-1zM8,0h1v1h-1v-1zM6,0h1v1h-1v-1zM4,0h1v1h-1v-1zM2,0h1v1h-1v-1zM0,0h1v1h-1v-1z"></path></svg> -->
      </td>
    </tr>
    {{end}}

    </tbody>
  </table>
</div>
{{end}}
<div class="m-2">
  <span class="text-primary">Введите код для поиска:</span>
  <form hx-post='/finder/find' hx-target="#finded" hx-swap="innerHTML">
    <input value="{{$.FormInput}}" class="input input-bordered w-full max-w-xs" type="text" placeholder="введите КМ" name='cisfield' _="on change toggle @disabled on #sbmt"/>
    <input id="sbmt" type="submit" disabled value="Найти" class="btn btn-outline btn-primary"/>  
  </form>
  <div id="finded"></div>
</div>

